{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 9, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/components/ParallelReader.module.scss [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"ParallelReader-module-scss-module__rbxfja__active\",\n  \"buttonGroup\": \"ParallelReader-module-scss-module__rbxfja__buttonGroup\",\n  \"container\": \"ParallelReader-module-scss-module__rbxfja__container\",\n  \"controls\": \"ParallelReader-module-scss-module__rbxfja__controls\",\n  \"grid\": \"ParallelReader-module-scss-module__rbxfja__grid\",\n  \"header\": \"ParallelReader-module-scss-module__rbxfja__header\",\n  \"inactive\": \"ParallelReader-module-scss-module__rbxfja__inactive\",\n  \"inputWrapper\": \"ParallelReader-module-scss-module__rbxfja__inputWrapper\",\n  \"panel\": \"ParallelReader-module-scss-module__rbxfja__panel\",\n  \"readerWrapper\": \"ParallelReader-module-scss-module__rbxfja__readerWrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/mats/Code/react-parallel-reader/app/components/ParallelReader.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { ReactReader } from 'react-reader';\nimport styles from './ParallelReader.module.scss';\nimport type { Rendition } from '../../types/epub';\n\n// Define a type for the location (can be a string CFI or integer 0)\ntype LocationType = string | number;\n\nexport default function ParallelReader() {\n    // --- State ---\n    const [urls, setUrls] = useState<string[]>(['/books/alice.epub', '/books/moby-dick.epub']);\n    const [count, setCount] = useState(2);\n    // NEW: We must track the location of each book individually\n    const [locations, setLocations] = useState<LocationType[]>([0, 0, 0]);\n\n    const renditionRefs = useRef<(Rendition | null)[]>([]);\n\n    // --- Handlers ---\n\n    const getRendition = (index: number, rendition: Rendition) => {\n        renditionRefs.current[index] = rendition;\n\n        // Inject styles INSIDE the iframe (SASS cannot reach here)\n        rendition.themes.default({\n            'p': {\n                'font-family': 'Helvetica, sans-serif',\n                'font-size': '1.1rem',\n                'line-height': '1.6'\n            },\n            'div': { 'padding-bottom': '20px' }\n        });\n    };\n\n    const handleLocationChange = (index: number, newLocation: LocationType) => {\n        // 1. Update the state for THIS book so it doesn't get \"stuck\"\n        const newLocations = [...locations];\n        newLocations[index] = newLocation;\n        setLocations(newLocations);\n    };\n\n    const updateUrl = (index: number, newUrl: string) => {\n        const newUrls = [...urls];\n        newUrls[index] = newUrl;\n        setUrls(newUrls);\n    };\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <h1>Parallel Reader</h1>\n                <div className={styles.controls}>\n                    <div className={styles.buttonGroup}>\n                        {[1, 2, 3].map(num => (\n                            <button\n                                key={num}\n                                onClick={() => setCount(num)}\n                                className={count === num ? styles.active : styles.inactive}\n                            >\n                                {num} Panel{num > 1 && 's'}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            <div className={styles.grid}>\n                {Array.from({ length: count }).map((_, index) => (\n                    <div\n                        key={index}\n                        className={styles.panel}\n                        style={{ maxWidth: `${100 / count}%` }}\n                    >\n                        <div className={styles.inputWrapper}>\n                            <input\n                                type=\"text\"\n                                placeholder=\"Paste EPUB URL here...\"\n                                value={urls[index] || ''}\n                                onChange={(e) => updateUrl(index, e.target.value)}\n                            />\n                        </div>\n\n                        <div className={styles.readerWrapper}>\n                            <ReactReader\n                                url={urls[index]}\n\n                                // REQUIRED PROP: Controls where the book is\n                                location={locations[index]}\n\n                                // REQUIRED PROP: Updates the state when user scrolls\n                                locationChanged={(loc) => handleLocationChange(index, loc)}\n\n                                getRendition={(rendition) => getRendition(index, rendition)}\n                                epubOptions={{\n                                    flow: \"scrolled\",\n                                    manager: \"continuous\",\n                                }}\n                            />\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAUe,SAAS;IACpB,gBAAgB;IAChB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAW;QAAC;QAAqB;KAAwB;IACzF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,4DAA4D;IAC5D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAiB;QAAC;QAAG;QAAG;KAAE;IAEpE,MAAM,gBAAgB,IAAA,+MAAM,EAAuB,EAAE;IAErD,mBAAmB;IAEnB,MAAM,eAAe,CAAC,OAAe;QACjC,cAAc,OAAO,CAAC,MAAM,GAAG;QAE/B,2DAA2D;QAC3D,UAAU,MAAM,CAAC,OAAO,CAAC;YACrB,KAAK;gBACD,eAAe;gBACf,aAAa;gBACb,eAAe;YACnB;YACA,OAAO;gBAAE,kBAAkB;YAAO;QACtC;IACJ;IAEA,MAAM,uBAAuB,CAAC,OAAe;QACzC,8DAA8D;QAC9D,MAAM,eAAe;eAAI;SAAU;QACnC,YAAY,CAAC,MAAM,GAAG;QACtB,aAAa;IACjB;IAEA,MAAM,YAAY,CAAC,OAAe;QAC9B,MAAM,UAAU;eAAI;SAAK;QACzB,OAAO,CAAC,MAAM,GAAG;QACjB,QAAQ;IACZ;IAEA,qBACI,8OAAC;QAAI,WAAW,2JAAM,CAAC,SAAS;;0BAC5B,8OAAC;gBAAI,WAAW,2JAAM,CAAC,MAAM;;kCACzB,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;wBAAI,WAAW,2JAAM,CAAC,QAAQ;kCAC3B,cAAA,8OAAC;4BAAI,WAAW,2JAAM,CAAC,WAAW;sCAC7B;gCAAC;gCAAG;gCAAG;6BAAE,CAAC,GAAG,CAAC,CAAA,oBACX,8OAAC;oCAEG,SAAS,IAAM,SAAS;oCACxB,WAAW,UAAU,MAAM,2JAAM,CAAC,MAAM,GAAG,2JAAM,CAAC,QAAQ;;wCAEzD;wCAAI;wCAAO,MAAM,KAAK;;mCAJlB;;;;;;;;;;;;;;;;;;;;;0BAWzB,8OAAC;gBAAI,WAAW,2JAAM,CAAC,IAAI;0BACtB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAM,GAAG,GAAG,CAAC,CAAC,GAAG,sBACnC,8OAAC;wBAEG,WAAW,2JAAM,CAAC,KAAK;wBACvB,OAAO;4BAAE,UAAU,GAAG,MAAM,MAAM,CAAC,CAAC;wBAAC;;0CAErC,8OAAC;gCAAI,WAAW,2JAAM,CAAC,YAAY;0CAC/B,cAAA,8OAAC;oCACG,MAAK;oCACL,aAAY;oCACZ,OAAO,IAAI,CAAC,MAAM,IAAI;oCACtB,UAAU,CAAC,IAAM,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;0CAIxD,8OAAC;gCAAI,WAAW,2JAAM,CAAC,aAAa;0CAChC,cAAA,8OAAC,+KAAW;oCACR,KAAK,IAAI,CAAC,MAAM;oCAEhB,4CAA4C;oCAC5C,UAAU,SAAS,CAAC,MAAM;oCAE1B,qDAAqD;oCACrD,iBAAiB,CAAC,MAAQ,qBAAqB,OAAO;oCAEtD,cAAc,CAAC,YAAc,aAAa,OAAO;oCACjD,aAAa;wCACT,MAAM;wCACN,SAAS;oCACb;;;;;;;;;;;;uBA3BH;;;;;;;;;;;;;;;;AAmC7B"}}]
}