{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/components/ParallelReader.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"ParallelReader-module-scss-module__rbxfja__active\",\n  \"buttonGroup\": \"ParallelReader-module-scss-module__rbxfja__buttonGroup\",\n  \"container\": \"ParallelReader-module-scss-module__rbxfja__container\",\n  \"controls\": \"ParallelReader-module-scss-module__rbxfja__controls\",\n  \"grid\": \"ParallelReader-module-scss-module__rbxfja__grid\",\n  \"header\": \"ParallelReader-module-scss-module__rbxfja__header\",\n  \"inactive\": \"ParallelReader-module-scss-module__rbxfja__inactive\",\n  \"inputWrapper\": \"ParallelReader-module-scss-module__rbxfja__inputWrapper\",\n  \"panel\": \"ParallelReader-module-scss-module__rbxfja__panel\",\n  \"readerWrapper\": \"ParallelReader-module-scss-module__rbxfja__readerWrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/mats/Code/react-parallel-reader/app/components/ParallelReader.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { ReactReader } from 'react-reader';\nimport styles from './ParallelReader.module.scss';\nimport type { Rendition } from '../../types/epub';\n\n// Define a type for the location (can be a string CFI or integer 0)\ntype LocationType = string | number;\n\nexport default function ParallelReader() {\n    // --- State ---\n    const [urls, setUrls] = useState<string[]>(['/books/alice.epub', '/books/moby-dick.epub']);\n    const [count, setCount] = useState(2);\n    // NEW: We must track the location of each book individually\n    const [locations, setLocations] = useState<LocationType[]>([0, 0, 0]);\n\n    const renditionRefs = useRef<(Rendition | null)[]>([]);\n\n    // --- Handlers ---\n\n    const getRendition = (index: number, rendition: Rendition) => {\n        renditionRefs.current[index] = rendition;\n\n        // Inject styles INSIDE the iframe (SASS cannot reach here)\n        rendition.themes.default({\n            'p': {\n                'font-family': 'Helvetica, sans-serif',\n                'font-size': '1.1rem',\n                'line-height': '1.6'\n            },\n            'div': { 'padding-bottom': '20px' }\n        });\n    };\n\n    const handleLocationChange = (index: number, newLocation: LocationType) => {\n        // 1. Update the state for THIS book so it doesn't get \"stuck\"\n        const newLocations = [...locations];\n        newLocations[index] = newLocation;\n        setLocations(newLocations);\n    };\n\n    const updateUrl = (index: number, newUrl: string) => {\n        const newUrls = [...urls];\n        newUrls[index] = newUrl;\n        setUrls(newUrls);\n    };\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <h1>Parallel Reader</h1>\n                <div className={styles.controls}>\n                    <div className={styles.buttonGroup}>\n                        {[1, 2, 3].map(num => (\n                            <button\n                                key={num}\n                                onClick={() => setCount(num)}\n                                className={count === num ? styles.active : styles.inactive}\n                            >\n                                {num} Panel{num > 1 && 's'}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            <div className={styles.grid}>\n                {Array.from({ length: count }).map((_, index) => (\n                    <div\n                        key={index}\n                        className={styles.panel}\n                        style={{ maxWidth: `${100 / count}%` }}\n                    >\n                        <div className={styles.inputWrapper}>\n                            <input\n                                type=\"text\"\n                                placeholder=\"Paste EPUB URL here...\"\n                                value={urls[index] || ''}\n                                onChange={(e) => updateUrl(index, e.target.value)}\n                            />\n                        </div>\n\n                        <div className={styles.readerWrapper}>\n                            <ReactReader\n                                url={urls[index]}\n\n                                // REQUIRED PROP: Controls where the book is\n                                location={locations[index]}\n\n                                // REQUIRED PROP: Updates the state when user scrolls\n                                locationChanged={(loc) => handleLocationChange(index, loc)}\n\n                                getRendition={(rendition) => getRendition(index, rendition)}\n                                epubOptions={{\n                                    flow: \"scrolled\",\n                                    manager: \"continuous\",\n                                }}\n                            />\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}"],"names":["c","_c","React","useState","useRef","ReactReader","styles","Rendition","LocationType","ParallelReader","$","$i","Symbol","for","t0","urls","setUrls","count","setCount","t1","locations","setLocations","t2","renditionRefs","t3","ParallelReader[getRendition]","index","rendition","current","themes","default","getRendition","t4","ParallelReader[handleLocationChange]","index_0","newLocation","newLocations","handleLocationChange","t5","ParallelReader[updateUrl]","index_1","newUrl","newUrls","updateUrl","t6","t7","t8","header","controls","buttonGroup","map","num","ParallelReader[(anonymous)() > <button>.onClick]","active","inactive","t9","Array","from","length","t10","grid","ParallelReader[(anonymous)()]","_","index_2","panel","maxWidth","inputWrapper","e","target","value","readerWrapper","loc","rendition_0","flow","manager","t11","container"],"mappings":"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","ignoreList":[]}}]
}