{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/components/ParallelReader.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"ParallelReader-module-scss-module__rbxfja__actions\",\n  \"active\": \"ParallelReader-module-scss-module__rbxfja__active\",\n  \"annotationCard\": \"ParallelReader-module-scss-module__rbxfja__annotationCard\",\n  \"buttonGroup\": \"ParallelReader-module-scss-module__rbxfja__buttonGroup\",\n  \"container\": \"ParallelReader-module-scss-module__rbxfja__container\",\n  \"controls\": \"ParallelReader-module-scss-module__rbxfja__controls\",\n  \"delete\": \"ParallelReader-module-scss-module__rbxfja__delete\",\n  \"emptyState\": \"ParallelReader-module-scss-module__rbxfja__emptyState\",\n  \"footer\": \"ParallelReader-module-scss-module__rbxfja__footer\",\n  \"grid\": \"ParallelReader-module-scss-module__rbxfja__grid\",\n  \"header\": \"ParallelReader-module-scss-module__rbxfja__header\",\n  \"inactive\": \"ParallelReader-module-scss-module__rbxfja__inactive\",\n  \"inputWrapper\": \"ParallelReader-module-scss-module__rbxfja__inputWrapper\",\n  \"jump\": \"ParallelReader-module-scss-module__rbxfja__jump\",\n  \"panel\": \"ParallelReader-module-scss-module__rbxfja__panel\",\n  \"readerWrapper\": \"ParallelReader-module-scss-module__rbxfja__readerWrapper\",\n  \"sidebar\": \"ParallelReader-module-scss-module__rbxfja__sidebar\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/mats/Code/react-parallel-reader/app/components/ParallelReader.tsx"],"sourcesContent":["\nimport React, { useState, useRef, useEffect } from 'react';\nimport { ReactReader } from 'react-reader';\nimport styles from './ParallelReader.module.scss';\nimport type { Rendition, Highlight } from '../../types/epub';\n\n// Define a type for the location (can be a string CFI or integer 0)\ntype LocationType = string | number;\n\ninterface ParallelReaderProps {\n    initialUrls: string[];\n    onBack?: () => void;\n}\n\nexport default function ParallelReader({ initialUrls, onBack }: ParallelReaderProps) {\n    // --- State ---\n    const [urls, setUrls] = useState<string[]>(initialUrls);\n    const [count, setCount] = useState(initialUrls.length || 2);\n    // NEW: We must track the location of each book individually\n    const [locations, setLocations] = useState<LocationType[]>(initialUrls.map(() => 0));\n\n    // Highlights State\n    const [highlights, setHighlights] = useState<Highlight[]>([]);\n    const [showHighlights, setShowHighlights] = useState(true);\n\n    const renditionRefs = useRef<(Rendition | null)[]>([]);\n\n    // Load highlights on mount\n    useEffect(() => {\n        fetch('/api/highlights')\n            .then(res => res.json())\n            .then(data => setHighlights(data))\n            .catch(err => console.error(\"Error loading highlights:\", err));\n    }, []);\n\n    // --- Handlers ---\n\n    const getRendition = (index: number, rendition: Rendition) => {\n        renditionRefs.current[index] = rendition;\n\n        // Inject styles INSIDE the iframe (SASS cannot reach here)\n        rendition.themes.default({\n            'p': {\n                'font-family': 'Helvetica, sans-serif',\n                'font-size': '1.1rem',\n                'line-height': '1.6'\n            },\n            'div': { 'padding-bottom': '20px' },\n            '::selection': {\n                'background': 'rgba(255, 255, 0, 0.3)'\n            },\n            '.hl-class': {\n                'fill': 'yellow',\n                'fill-opacity': '0.3',\n                'mix-blend-mode': 'multiply'\n            }\n        });\n\n        // Apply existing highlights for this book\n        const bookHighlights = highlights.filter(h => h.bookUrl === urls[index]);\n        bookHighlights.forEach(h => {\n            rendition.annotations.add('highlight', h.cfiRange, {}, null, 'hl-class');\n        });\n\n\n        // Listen for new selections\n        rendition.on('selected', (cfiRange: string, contents: any) => {\n            const range = rendition.getRange(cfiRange);\n            const text = range.toString();\n\n            // Persist\n            const newHighlight: Highlight = {\n                id: Date.now().toString(),\n                cfiRange,\n                text,\n                bookUrl: urls[index],\n                color: '#ffeb3b',\n                created: Date.now()\n            };\n\n            fetch('/api/highlights', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(newHighlight)\n            }).then(res => res.json())\n                .then(() => {\n                    setHighlights(prev => [...prev, newHighlight]);\n                    rendition.annotations.add('highlight', cfiRange, {}, null, 'hl-class');\n                    // Clear selection to avoid visual clutter\n                    const selection = contents.window.getSelection();\n                    selection?.removeAllRanges();\n                });\n        });\n    };\n\n    // Re-apply highlights if they change (e.g. added from another panel or loaded)\n    useEffect(() => {\n        renditionRefs.current.forEach((rendition, index) => {\n            if (rendition) {\n                const bookHighlights = highlights.filter(h => h.bookUrl === urls[index]);\n                bookHighlights.forEach(h => {\n                    // Adding same annotation twice is usually safe or ignored by epubjs, \n                    // but ideally we check. For MVP, simply adding is okay.\n                    rendition.annotations.add('highlight', h.cfiRange, {}, null, 'hl-class');\n                });\n            }\n        });\n    }, [highlights, urls]);\n\n\n    const handleLocationChange = (index: number, newLocation: LocationType) => {\n        // 1. Update the state for THIS book so it doesn't get \"stuck\"\n        const newLocations = [...locations];\n        newLocations[index] = newLocation;\n        setLocations(newLocations);\n    };\n\n    const updateUrl = (index: number, newUrl: string) => {\n        const newUrls = [...urls];\n        newUrls[index] = newUrl;\n        setUrls(newUrls);\n    };\n\n    const deleteHighlight = async (id: string, cfiRange: string, bookIndex: number) => {\n        // Optimistic update\n        setHighlights(prev => prev.filter(h => h.id !== id));\n\n        // Remove from rendition\n        const rendition = renditionRefs.current[bookIndex];\n        if (rendition) {\n            rendition.annotations.remove(cfiRange, 'highlight');\n        }\n\n        await fetch('/api/highlights', {\n            method: 'DELETE',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ id })\n        });\n    };\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n                    {onBack && (\n                        <button\n                            onClick={onBack}\n                            className={styles.backButton}\n                            style={{\n                                background: 'none', border: 'none', cursor: 'pointer', fontSize: '1.2rem'\n                            }}\n                        >\n                            ← Back\n                        </button>\n                    )}\n                    <h1>Parallel Reader</h1>\n                </div>\n                <div className={styles.controls}>\n                    <div className={styles.buttonGroup}>\n                        <button\n                            onClick={() => setShowHighlights(!showHighlights)}\n                            className={showHighlights ? styles.active : styles.inactive}\n                        >\n                            {showHighlights ? 'Hide Notes' : 'Show Notes'}\n                        </button>\n                    </div>\n\n                    <div className={styles.buttonGroup}>\n                        {[1, 2, 3].map(num => (\n                            <button\n                                key={num}\n                                onClick={() => setCount(num)}\n                                className={count === num ? styles.active : styles.inactive}\n                            >\n                                {num} Panel{num > 1 && 's'}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            <div style={{ display: 'flex', flex: 1, overflow: 'hidden' }}>\n                {/* Main Reader Grid */}\n                <div className={styles.grid} style={{ flex: showHighlights ? '0 0 75%' : '1' }}>\n                    {Array.from({ length: count }).map((_, index) => (\n                        <div\n                            key={index}\n                            className={styles.panel}\n                            style={{ maxWidth: `${100 / count}%` }}\n                        >\n                            <div className={styles.inputWrapper}>\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Paste EPUB URL here...\"\n                                    value={urls[index] || ''}\n                                    onChange={(e) => updateUrl(index, e.target.value)}\n                                />\n                            </div>\n\n                            <div className={styles.readerWrapper}>\n                                <ReactReader\n                                    url={urls[index]}\n\n                                    // REQUIRED PROP: Controls where the book is\n                                    location={locations[index] || 0}\n\n                                    // REQUIRED PROP: Updates the state when user scrolls\n                                    locationChanged={(loc) => handleLocationChange(index, loc)}\n\n                                    getRendition={(rendition) => getRendition(index, rendition)}\n                                    epubOptions={{\n                                        flow: \"scrolled\",\n                                        manager: \"continuous\",\n                                    }}\n                                />\n                            </div>\n                        </div>\n                    ))}\n                </div>\n\n                {/* Highlights Sidebar */}\n                {showHighlights && (\n                    <div className={styles.sidebar}>\n                        <h2>Annotations</h2>\n                        {highlights.length === 0 && <p className={styles.emptyState}>Select text to highlight.</p>}\n\n                        {highlights.map(h => (\n                            <div key={h.id} className={styles.annotationCard}>\n                                <p>\"{h.text}\"</p>\n                                <div className={styles.footer}>\n                                    <span>\n                                        {/* Try to find which book this belongs to for display */}\n                                        {urls.findIndex(u => u === h.bookUrl) > -1 ? `Panel ${urls.findIndex(u => u === h.bookUrl) + 1}` : 'Other Book'}\n                                    </span>\n                                    <div className={styles.actions}>\n                                        <button\n                                            className={styles.jump}\n                                            onClick={() => {\n                                                const idx = urls.indexOf(h.bookUrl);\n                                                if (idx !== -1 && renditionRefs.current[idx]) {\n                                                    renditionRefs.current[idx]?.display(h.cfiRange);\n                                                }\n                                            }}\n                                        >\n                                            Jump\n                                        </button>\n                                        <button\n                                            className={styles.delete}\n                                            onClick={() => deleteHighlight(h.id, h.cfiRange, urls.indexOf(h.bookUrl))}\n                                        >\n                                            Delete\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}"],"names":["React","useState","useRef","useEffect","ReactReader","styles","Rendition","Highlight","LocationType","ParallelReaderProps","initialUrls","onBack","ParallelReader","t0","$","_c","$i","Symbol","for","urls","setUrls","count","setCount","length","t1","map","_ParallelReaderInitialUrlsMap","locations","setLocations","t2","highlights","setHighlights","showHighlights","setShowHighlights","t3","renditionRefs","t4","t5","ParallelReader[useEffect()]","fetch","then","_ParallelReaderUseEffectAnonymous","data","catch","_ParallelReaderUseEffectAnonymous2","t6","ParallelReader[getRendition]","index","rendition","current","themes","default","bookHighlights","filter","h","bookUrl","forEach","h_0","annotations","add","cfiRange","on","ParallelReader[getRendition > rendition.on()]","contents","range","getRange","text","toString","newHighlight","id","Date","now","color","created","method","headers","body","JSON","stringify","_ParallelReaderGetRenditionRenditionOnAnonymous","ParallelReader[getRendition > rendition.on() > (anonymous)()]","prev","selection","window","getSelection","removeAllRanges","getRendition","t7","t8","ParallelReader[useEffect() > renditionRefs.current.forEach()]","rendition_0","index_0","bookHighlights_0","h_1","h_2","t9","ParallelReader[handleLocationChange]","index_1","newLocation","newLocations","handleLocationChange","t10","ParallelReader[updateUrl]","index_2","newUrl","newUrls","updateUrl","t11","ParallelReader[deleteHighlight]","cfiRange_0","bookIndex","prev_0","h_3","rendition_1","remove","deleteHighlight","t12","display","alignItems","gap","t13","backButton","background","border","cursor","fontSize","t14","t15","t16","ParallelReader[<button>.onClick]","t17","active","inactive","t18","t19","buttonGroup","t20","t21","num","ParallelReader[(anonymous)() > <button>.onClick]","t22","controls","t23","header","t24","flex","overflow","t25","t26","t27","Array","from","t28","ParallelReader[(anonymous)()]","_","index_3","panel","maxWidth","inputWrapper","e","target","value","readerWrapper","loc","rendition_2","flow","manager","t29","grid","t30","sidebar","emptyState","h_4","annotationCard","footer","findIndex","u_0","u","actions","jump","ParallelReader[highlights.map() > <button>.onClick]","idx","indexOf","delete","t31","t32","container","res_0","res","json","err","console","error"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 741, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/components/Bookshelf.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"arrow\": \"Bookshelf-module-scss-module__3Di2QW__arrow\",\n  \"bookCount\": \"Bookshelf-module-scss-module__3Di2QW__bookCount\",\n  \"card\": \"Bookshelf-module-scss-module__3Di2QW__card\",\n  \"cardContent\": \"Bookshelf-module-scss-module__3Di2QW__cardContent\",\n  \"collectionName\": \"Bookshelf-module-scss-module__3Di2QW__collectionName\",\n  \"container\": \"Bookshelf-module-scss-module__3Di2QW__container\",\n  \"emptyState\": \"Bookshelf-module-scss-module__3Di2QW__emptyState\",\n  \"list\": \"Bookshelf-module-scss-module__3Di2QW__list\",\n  \"loading\": \"Bookshelf-module-scss-module__3Di2QW__loading\",\n  \"subtitle\": \"Bookshelf-module-scss-module__3Di2QW__subtitle\",\n  \"title\": \"Bookshelf-module-scss-module__3Di2QW__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 758, "column": 0}, "map": {"version":3,"sources":["file:///Users/mats/Code/react-parallel-reader/app/components/Bookshelf.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport type { BookCollection } from '../../types/epub';\nimport styles from './Bookshelf.module.scss';\n\ninterface BookshelfProps {\n    onSelectCollection: (files: string[]) => void;\n}\n\nexport default function Bookshelf({ onSelectCollection }: BookshelfProps) {\n    const [collections, setCollections] = useState<BookCollection[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetch('/api/books')\n            .then((res) => res.json())\n            .then((data) => {\n                setCollections(data);\n                setLoading(false);\n            })\n            .catch((err) => {\n                console.error('Failed to load books:', err);\n                setLoading(false);\n            });\n    }, []);\n\n    if (loading) return <div className={styles.loading}>Loading library...</div>;\n\n    return (\n        <div className={styles.container}>\n            <h1 className={styles.title}>My Collections</h1>\n\n            {collections.length === 0 ? (\n                <div className={styles.emptyState}>\n                    <p>No collections found in <code>public/books/</code>.</p>\n                    <p className={styles.subtitle}>Create a subfolder (e.g., <code>public/books/classics/</code>) and add EPUB files to start.</p>\n                </div>\n            ) : (\n                <div className={styles.list}>\n                    {collections.map((collection) => (\n                        <div\n                            key={collection.name}\n                            className={styles.card}\n                            onClick={() => onSelectCollection(collection.files)}\n                        >\n                            <div className={styles.cardContent}>\n                                <div>\n                                    <h3 className={styles.collectionName}>\n                                        {collection.name.replace(/-/g, ' ')}\n                                    </h3>\n                                    <p className={styles.bookCount}>\n                                        {collection.files.length} book{collection.files.length !== 1 && 's'}\n                                    </p>\n                                </div>\n                                <div className={styles.arrow}>\n                                    <span style={{ fontSize: '1.5rem' }}>→</span>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":["c","_c","React","useEffect","useState","BookCollection","styles","BookshelfProps","onSelectCollection","files","Bookshelf","t0","$","$i","Symbol","for","t1","collections","setCollections","loading","setLoading","t2","t3","Bookshelf[useEffect()]","fetch","then","_BookshelfUseEffectAnonymous","data","catch","err","console","error","t4","title","t5","container","length","emptyState","subtitle","list","map","collection","name","card","Bookshelf[collections.map() > <div>.onClick]","cardContent","collectionName","replace","bookCount","arrow","fontSize","res","json"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 998, "column": 0}, "map": {"version":3,"sources":["file:///Users/mats/Code/react-parallel-reader/app/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from \"react\";\nimport ParallelReader from \"./components/ParallelReader\";\nimport Bookshelf from \"./components/Bookshelf\";\n\nexport default function Home() {\n  const [selectedBooks, setSelectedBooks] = useState<string[] | null>(null);\n\n  return (\n    <main className=\"min-h-screen bg-gray-50\">\n      {selectedBooks ? (\n        <ParallelReader\n          initialUrls={selectedBooks}\n          onBack={() => setSelectedBooks(null)}\n        />\n      ) : (\n        <Bookshelf onSelectCollection={setSelectedBooks} />\n      )}\n    </main>\n  );\n}\n"],"names":["c","_c","React","useState","ParallelReader","Bookshelf","Home","$","$i","Symbol","for","selectedBooks","setSelectedBooks","t0","Home[<ParallelReader>.onBack]"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,cAAc,MAAM,6BAA6B;AACxD,OAAOC,SAAS,MAAM,wBAAwB;;;AAJ9C,YAAY;;;;;AAMG;;IAAA,MAAAE,CAAA,OAAAN,gLAAA,EAAA;IAAA,IAAAM,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACb,MAAA,CAAAI,aAAA,EAAAC,gBAAA,CAAA,OAA0CT,yKAAQ,EAAkB,IAAI,CAAC;IAAC,IAAAU,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAI,aAAA,EAAA;QAGxEE,EAAA,iBAAA,6LAAA,IASO;YATS,SAAyB,EAAzB,yBAAyB,CACtC;sBAAAF,aAAa,iBACZ,6LAAC,kJAAc;gBACAA,WAAa,CAAbA,CAAAA,aAAY,CAAC;gBAClB,MAA4B,CAA5B,CAAA;oBAAA,iCAAAG,CAAA,GAAMF,gBAAgB,CAAC,IAAI;gBAAC,CAAA,CAAA,gCAAD,CAAC,GAIvC;;;;;qCADC,6LAAC,6IAAS;gBAAqBA,kBAAgB,CAAhBA,CAAAA,gBAAe,CAAC,GACjD,CACF,EATA,IASO;;;;;;;;;;;QAAAL,CAAA,CAAA,EAAA,GAAAI,aAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IAAA,OATPM,EASO;AAAA;;KAbIP,KAAA","ignoreList":[]}}]
}